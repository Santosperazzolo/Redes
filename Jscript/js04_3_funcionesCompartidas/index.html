<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>JS04_3 - Funciones Compartidas</title>
    <style>
      :root {
        --panel: #e0e0e0;
        --panel-top: #b7dbef;
        --panel-bottom: #f7f3c9;
        --borde: #b3b3b3;
      }
      body { font-family: Arial, Helvetica, sans-serif; background:#fff; color:#111; }
      .wrap {
        width: 760px;
        margin: 32px auto;
        background: var(--panel);
        padding: 18px;
        box-sizing: border-box;
      }
      .top {
        background: var(--panel-top);
        padding: 16px 18px 18px;
      }
      #display {
        width: 100%;
        height: 38px;
        margin-bottom: 16px;
        box-sizing: border-box;
        padding: 6px 10px;
        font-size: 20px;
        text-align: right;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 18px 28px;
        max-width: 560px;
        margin: 0 auto;
      }
      .grid .btn {
        height: 36px;
        background: #eee;
        border: 1px solid var(--borde);
        border-radius: 3px;
        font-size: 16px;
        cursor: pointer;
      }
      .bottom {
        background: var(--panel-bottom);
        padding: 16px 18px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px 16px;
        margin-top: 12px;
      }
      .action {
        height: 44px;
        background: #eee;
        border: 1px solid var(--borde);
        border-radius: 3px;
        font-size: 16px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="top">
        <input id="display" type="text" value="" />

        <div class="grid" id="teclado">
          <button class="btn" data-n="1">1</button>
          <button class="btn" data-n="2">2</button>
          <button class="btn" data-n="3">3</button>
          <button class="btn" data-n="4">4</button>
          <button class="btn" data-n="5">5</button>
          <button class="btn" data-n="6">6</button>
          <button class="btn" data-n="7">7</button>
          <button class="btn" data-n="8">8</button>
          <button class="btn" data-n="9">9</button>
          <button class="btn" data-n="0" style="grid-column: 1 / 2">0</button>
        </div>
      </div>

      <div class="bottom">
        <button id="btnAdd" class="action">+Acumulador</button>
        <button id="btnShow" class="action">Muestra Acumulador</button>
        <button id="btnClearAcc" class="action">Borra Acumulador</button>
        <button id="btnClearDisp" class="action">Borra display</button>
      </div>
    </div>

    <script>
      var acumulador = 0;

      function setDisplay(v) {
        var d = document.getElementById('display');
        d.value = String(v);
        d.focus();
        d.select();
      }

      document.getElementById('teclado').addEventListener('click', function (ev) {
        var btn = ev.target.closest('button[data-n]');
        if (!btn) return;
        var valor = btn.getAttribute('data-n');
        setDisplay(valor);
      });


      document.getElementById('btnAdd').addEventListener('click', function () {
        var n = parseFloat(document.getElementById('display').value);
        if (!isNaN(n)) acumulador += n;
        setDisplay(acumulador);
      });

      document.getElementById('btnShow').addEventListener('click', function () {
        setDisplay(acumulador);
      });

      document.getElementById('btnClearAcc').addEventListener('click', function () {
        acumulador = 0;
        setDisplay('0');
      });

      document.getElementById('btnClearDisp').addEventListener('click', function () {
        setDisplay('');
      });
    </script>
  </body>
  </html>

